<%# <h1>Profile</h1> %>

<div class="container-fluid padding" id="loggin-top">
  <div class="row justify-content-center">
    <div class="col-md-4" id="loggin-inner-top">
      <div class="card">
        <% if current_user.avatar.blank?%>
          <img class="card-img-top" src="/images/default_avatar.png">
        <% else %>
          <div class="card-img-top" ><%= image_tag(current_user.avatar, width: 400) %> </div> 
        <% end %>
        <div class="card-body text-center">
          <h3 class="card-title">Hello <%= current_user.name%>!</h3><br> 
          <p clas="card-text"><%= current_user.email %></p><br>
          <p clas="card-text"><%= current_user.role %></p><br>
          <p clas="card-text"><%= current_user.admin? ? 'Admin' : 'none' %></p><br>
          <p class= "text-justify">Following:  <%= current_user.follower_user.count %> </p><br>
          <p class= "text-justify">Followers:  <%= current_user.followed_user.count %></p><br>
          
          <div class="follow-part">
            <% unless current_user.id == @user.id %>
              <%= button_to "follow", relationships_path(user_id: @user.id), method: :post, class: "btn btn-outline-primary show-btn" %>
            <% end %>
          </div>
          
          <%= link_to community_user_path(current_user.id), class: 'nav-link' do %> 
            <i class="fas fa-users"> </i>
          <% end %> 
        </div>
      </div>
    </div>
  </div>
</div>



<%# Follows table %>
<hr class="my-4"> 

    <div class="container-fluid padding">
      <div class="row padding">
        <div class="col-lg-6 col-md-12">
          <div class="card">
            <div class="card-body">
             <h4 class="card-title">My Followers Id</h4>
             <div class="table-responsive"> 
              <table class="table">
                <tbody class="table-light">
                  <% current_user.follower_user.each do |rel| %>
                    <tr>
                      <td clas="card-text">Follower id <br> <%= rel.id %></td>
                      <td clas="card-text">Name <br><%= rel.name %></td>
                      <td clas="card-text">Role <br><%= rel.role %></td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
             </div>
              <%= link_to "#", type: "button", class:"btn btn-outline-secondary"  do %> 
                Learn More
              <% end %> 
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card">
            <div class="card-body">
              <h4 class="card-title"> My follow id </h4>
             <div class="table-responsive"> 
              <table class="table">
                <tbody class="table-light">
                  <% current_user.follower.each do |rel| %>
                    <tr>
                      <td clas="card-text"><%= rel.id %></td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </div>  
              <%= link_to "#", type: "button", class:"btn btn-outline-secondary"  do %> 
                Learn More
              <% end %> 
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr class="my-4"> 

<%# My table task %>

<div class="container-fluid padding" id="loggin-top">
  <div class="row justify-content-center">
    <%= paginate @tasks %>
    <div class="col-lg-12" id="loggin-inner-top">
      <div class="table-responsive"> 
        <table class="table">
          <thead class="table-light">
            <tr>
              <th>Title</th>
              <th>Image</th>
              <th>Created by</th>
              <th>Task Id</th>
              <% if current_user.role == "teacher" %> 
                <th colspan="3"></th>
              <% else %>
                <th colspan="3">Homework</th>
              <% end %>
            </tr>
          </thead>
          <tbody>
            <% @tasks.each do |task| %>
              <tr>
                <td><%= task.title %></td>
                <% if task.image.variable? %>
                  <td><%= image_tag(task.image, width: 70) %></td>
                <% else %>
                  <td> no image </td>
                <% end %> 
                <td><%= task.user.name %></td> 
                <td><%= task.id %></td> 
                <% if current_user.role == "teacher" %>
                  <td><%= link_to 'Show', task %></td>
                  <% if task.user.id == current_user.id %>
                    <td><%= link_to 'Edit', edit_task_path(task) %></td>
                    <td><%= link_to 'Destroy', task, method: :delete, data: { confirm: 'Are you sure?' } %></td>
                  <% end %>
                <%# elsif current_user.connected?(task.user.id)%> 
                <% elsif current_user.role == "student"  %>
                  <td><%= link_to 'Tvoz', task  %></td>
                <% end %>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>






<hr>
<br>


<%= link_to 'Edit Account', edit_user_registration_path(current_user.id) %> |
<%= link_to 'community', community_user_path(current_user.id) %> | 
<%= link_to 'Home', root_path %>